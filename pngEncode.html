<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <html>
    <canvas id="canvas"></canvas>
    <input type="file" />

  </html>
</body>
<script>
  const input = document.querySelector('input');
  input.addEventListener('change', async function(e) {
    const [file] = e.target.files;
    const arrayBuffer = await file.arrayBuffer();
    console.log('arrayBuffer', arrayBuffer);
    // TODO: Let's decode arrayBuffer
    var ctx = document.createElement('canvas').getContext('2d');

    // var buffer = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height).data.buffer;
    console.log(arrayBuffer)
    var array = new Uint8ClampedArray(arrayBuffer);
    console.log(array);

    var image = new ImageData(array, 720, 720);

    // console.log(array.buffer === buffer && image.data.buffer === buffer);
    ctx.putImageData(image, 0, 0);
  });
  const drawCanva = () => {
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const arr = new Uint8ClampedArray(40000);
    console.log(arr, "arrCanvas")
    // Iterate through every pixel
    for (let i = 0; i < arr.length; i += 4) {
      arr[i + 0] = 0;  // R value
      arr[i + 1] = 190;  // G value
      arr[i + 2] = 0;    // B value
      arr[i + 3] = 255;  // A value
    }

    // Initialize a new ImageData object
    let imageData = new ImageData(arr, 200);
    // Draw image data to the canvas
    ctx.putImageData(imageData, 20, 20);
  };
  drawCanva();
</script>
</html>